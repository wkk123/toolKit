<!--minesweeper.wxml-->
<view class="container">
  <!-- æ¸¸æˆä¿¡æ¯æ  -->
  <view class="game-header">
    <view class="info-section">
      <view class="info-item">
        <text class="info-label">åœ°é›·</text>
        <text class="info-value">{{minesRemaining}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">æ—¶é—´</text>
        <text class="info-value">{{timeDisplay}}</text>
      </view>
    </view>
    <view class="difficulty-section">
      <view 
        class="difficulty-btn {{difficulty === 'easy' ? 'active' : ''}}"
        data-difficulty="easy"
        bindtap="onDifficultyChange"
      >
        ç®€å•
      </view>
      <view 
        class="difficulty-btn {{difficulty === 'medium' ? 'active' : ''}}"
        data-difficulty="medium"
        bindtap="onDifficultyChange"
      >
        ä¸­ç­‰
      </view>
      <view 
        class="difficulty-btn {{difficulty === 'hard' ? 'active' : ''}}"
        data-difficulty="hard"
        bindtap="onDifficultyChange"
      >
        å›°éš¾
      </view>
    </view>
    <view class="game-controls">
      <button 
        wx:if="{{gameStatus === 'ready' || gameStatus === 'gameover' || gameStatus === 'win'}}" 
        class="control-btn start-btn" 
        bindtap="restart"
      >
        {{gameStatus === 'ready' ? 'å¼€å§‹' : 'é‡æ–°å¼€å§‹'}}
      </button>
    </view>
  </view>

  <!-- æ¸¸æˆç½‘æ ¼ -->
  <view class="game-area">
    <view class="minesweeper-grid" style="grid-template-columns: repeat({{gridCols}}, 1fr);">
      <view 
        class="cell {{item.state === 'revealed' && item.adjacentMines > 0 ? 'number-' + item.adjacentMines : ''}} {{item.state === 'revealed' ? 'revealed' : ''}} {{item.state === 'flagged' ? 'flagged' : ''}} {{item.state === 'question' ? 'question' : ''}} {{item.isMine && item.state === 'revealed' ? 'mine' : ''}}"
        wx:for="{{flatGrid}}" 
        wx:key="cell-{{item.row}}-{{item.col}}"
        data-row="{{item.row}}"
        data-col="{{item.col}}"
        bindtap="onCellTap"
        bindlongpress="onCellLongPress"
      >
        <!-- éšè—çŠ¶æ€ -->
        <view wx:if="{{item.state === 'hidden'}}" class="cell-hidden"></view>
        
        <!-- æ ‡è®°çŠ¶æ€ -->
        <view wx:elif="{{item.state === 'flagged'}}" class="cell-flagged">ğŸš©</view>
        
        <!-- ç–‘é—®çŠ¶æ€ -->
        <view wx:elif="{{item.state === 'question'}}" class="cell-question">?</view>
        
        <!-- å·²å±•å¼€çŠ¶æ€ -->
        <view wx:elif="{{item.state === 'revealed'}}" class="cell-revealed">
          <!-- åœ°é›· -->
          <text wx:if="{{item.isMine}}" class="cell-mine">ğŸ’£</text>
          <!-- æ•°å­— -->
          <text wx:elif="{{item.adjacentMines > 0}}" class="cell-number">{{item.adjacentMines}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æ¸¸æˆè¯´æ˜ -->
  <view class="game-tips">
    <text class="tips-text">ğŸ’¡ ç‚¹å‡»å±•å¼€æ ¼å­ï¼Œé•¿æŒ‰æ ‡è®°åœ°é›·ï¼Œå±•å¼€æ‰€æœ‰éåœ°é›·æ ¼å­å³å¯èƒœåˆ©ï¼</text>
  </view>
</view>

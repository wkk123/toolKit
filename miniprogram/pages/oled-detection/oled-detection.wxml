<!--oled-detection.wxml-->
<view class="container">
  <!-- å¯¼èˆªæ  -->
  <view class="navbar">
    <view class="nav-back" bindtap="prevStep">
      <text class="nav-back-icon">â†</text>
    </view>
    <text class="nav-title">OLEDæ£€æµ‹ ç¬¬{{currentStep + 1}}/{{totalSteps}}æ­¥</text>
  </view>

  <!-- é‡è¦æç¤º -->
  <view class="warning-box">
    <text class="warning-icon">âš ï¸</text>
    <view class="warning-content">
      <text class="warning-title">é‡è¦æç¤º</text>
      <text class="warning-text">è¯·åœ¨äº®åº¦50%+ç¯å¢ƒä¸‹</text>
      <text class="warning-text">æ¯ä¸ªæµ‹è¯•æŒç»­30ç§’</text>
    </view>
  </view>

  <!-- æµ‹è¯•å†…å®¹åŒºåŸŸ -->
  <view class="test-content-area">
    <!-- çº¯è‰²æ£€æµ‹ -->
    <view wx:if="{{testSteps[currentStep].type === 'color-test'}}" class="test-display color-test" style="background-color: {{testSteps[currentStep].colors[testSteps[currentStep].currentColorIndex]}}" bindtap="switchColor">
      <view class="test-info">
        <text class="test-step-title">[{{testSteps[currentStep].id}}. {{testSteps[currentStep].title}}]</text>
        <text class="test-step-desc">{{testSteps[currentStep].desc}}</text>
        <text class="test-tip">ç‚¹å‡»åˆ‡æ¢é¢œè‰²</text>
      </view>
    </view>

    <!-- æ®‹å½±æµ‹è¯• -->
    <view wx:elif="{{testSteps[currentStep].type === 'burn-in-test'}}" class="test-display burn-in-test" bindtap="switchBurnInPattern">
      <view wx:if="{{testSteps[currentStep].pattern === 'checkerboard'}}" class="checkerboard-pattern"></view>
      <view wx:else class="black-pattern"></view>
      <view class="test-info">
        <text class="test-step-title">[{{testSteps[currentStep].id}}. {{testSteps[currentStep].title}}]</text>
        <text class="test-step-desc">{{testSteps[currentStep].desc}}</text>
        <text class="test-tip">ç‚¹å‡»åˆ‡æ¢æ¨¡å¼</text>
      </view>
    </view>

    <!-- UIå…ƒç´ æ¨¡æ‹Ÿ -->
    <view wx:elif="{{testSteps[currentStep].type === 'ui-simulation'}}" class="test-display ui-simulation">
      <view class="status-bar">
        <text class="status-time">9:41</text>
        <view class="status-icons">
          <text>ğŸ“¶</text>
          <text>ğŸ“¶</text>
          <text>ğŸ”‹</text>
        </view>
      </view>
      <view class="ui-content">
        <text class="test-step-title">[{{testSteps[currentStep].id}}. {{testSteps[currentStep].title}}]</text>
        <text class="test-step-desc">{{testSteps[currentStep].desc}}</text>
      </view>
      <view class="nav-bar">
        <text>â—€</text>
        <text>â—</text>
        <text>â–¡</text>
      </view>
    </view>

    <!-- ç°åº¦æ¸å˜ -->
    <view wx:elif="{{testSteps[currentStep].type === 'grayscale'}}" class="test-display grayscale-test">
      <view class="grayscale-gradient"></view>
      <view class="test-info">
        <text class="test-step-title">[{{testSteps[currentStep].id}}. {{testSteps[currentStep].title}}]</text>
        <text class="test-step-desc">{{testSteps[currentStep].desc}}</text>
      </view>
    </view>

    <!-- æ–‡å­—æ®‹å½± -->
    <view wx:elif="{{testSteps[currentStep].type === 'text-burn'}}" class="test-display text-burn-test">
      <view class="scrolling-text">
        <text class="scroll-text-item">è¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡å­—ï¼Œç”¨äºæ£€æµ‹OLEDå±å¹•çš„æ–‡å­—æ®‹å½±é—®é¢˜</text>
        <text class="scroll-text-item">è¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡å­—ï¼Œç”¨äºæ£€æµ‹OLEDå±å¹•çš„æ–‡å­—æ®‹å½±é—®é¢˜</text>
        <text class="scroll-text-item">è¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡å­—ï¼Œç”¨äºæ£€æµ‹OLEDå±å¹•çš„æ–‡å­—æ®‹å½±é—®é¢˜</text>
      </view>
      <view class="test-info">
        <text class="test-step-title">[{{testSteps[currentStep].id}}. {{testSteps[currentStep].title}}]</text>
        <text class="test-step-desc">{{testSteps[currentStep].desc}}</text>
      </view>
    </view>
  </view>

  <!-- å€’è®¡æ—¶ -->
  <view class="countdown-box">
    <text class="countdown-text">å‰©ä½™æ—¶é—´ï¼š{{countdown}}ç§’</text>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="actions">
    <button class="btn btn-issue" bindtap="reportIssue">å‘ç°é—®é¢˜</button>
    <button class="btn btn-normal" bindtap="nextStep">æ­£å¸¸ï¼Œç»§ç»­</button>
  </view>

  <!-- æ’å±å¹¿å‘Š -->
  <view wx:if="{{false}}" class="interstitial-ad">
    <view class="ad-overlay" bindtap="closeInterstitialAd">
      <view class="ad-content" catchtap="true">
        <view class="ad-header">
          <text class="ad-label">å¹¿å‘Š</text>
          <text class="ad-close" bindtap="closeInterstitialAd">Ã—</text>
        </view>
        <view class="ad-body">
          <text class="ad-title">æ’å±å¹¿å‘Š</text>
          <text class="ad-desc">(å¼€å§‹ä¸‹ä¸€ä¸ªæµ‹è¯•å‰)</text>
          <button class="ad-close-btn" bindtap="closeInterstitialAd">å…³é—­å¹¿å‘Š</button>
        </view>
      </view>
    </view>
  </view>

  <!-- å°è´´å£« -->
  <view class="tips-section">
    <view class="tips-header">
      <text class="tips-icon">ğŸ’¡</text>
      <text class="tips-title">å°è´´å£«ï¼š</text>
    </view>
    <text class="tips-question">å¦‚ä½•é¢„é˜²OLEDçƒ§å±ï¼Ÿ</text>
    <button class="tips-btn" bindtap="viewPrevention">æŸ¥çœ‹é¢„é˜²æŒ‡å—</button>
  </view>
</view>

<!--report.wxml-->
<scroll-view class="container" scroll-y>
  <!-- 报告标题 -->
  <view class="report-header">
    <text class="header-title">📊 屏幕健康报告</text>
  </view>

  <!-- 设备信息 -->
  <view class="device-info">
    <view class="info-item">
      <text class="info-label">设备：</text>
      <text class="info-value">{{deviceName}}</text>
    </view>
    <view class="info-item">
      <text class="info-label">屏幕：</text>
      <text class="info-value">{{screenType}}</text>
    </view>
    <view class="info-item">
      <text class="info-label">检测时间：</text>
      <text class="info-value">{{testDate}}</text>
    </view>
  </view>

  <!-- 综合评分 -->
  <view class="score-section">
    <view class="score-header">
      <text class="score-icon">🏆</text>
      <text class="score-label">综合评分：</text>
      <text class="score-value">{{healthScore}}分</text>
    </view>
    <view class="score-bar-container">
      <view class="score-bar">
        <view class="score-bar-fill" style="width: {{healthScorePercent}}%"></view>
      </view>
      <text class="score-percent">{{healthScorePercent}}%</text>
    </view>
  </view>

  <!-- 各项指标 -->
  <view class="indicators-section">
    <view class="section-header">
      <text class="section-icon">📈</text>
      <text class="section-title">各项指标：</text>
    </view>
    <view class="indicators-list">
      <view class="indicator-item" wx:for="{{indicators}}" wx:key="name">
        <text class="indicator-bullet">•</text>
        <text class="indicator-name">{{item.name}}：</text>
        <text class="indicator-value {{item.level}}">{{item.value}}</text>
      </view>
    </view>
  </view>

  <!-- 专业建议 -->
  <view class="suggestions-section">
    <view class="section-header">
      <text class="section-icon">💡</text>
      <text class="section-title">专业建议：</text>
    </view>
    <view class="suggestions-list">
      <view class="suggestion-item" wx:for="{{suggestions}}" wx:key="index" wx:for-index="idx">
        <text class="suggestion-number">{{idx + 1}}.</text>
        <text class="suggestion-text">{{item}}</text>
      </view>
    </view>
  </view>

  <!-- 操作按钮 -->
  <view class="action-buttons">
    <button class="action-btn share-btn" bindtap="shareReport">分享报告</button>
    <button class="action-btn save-btn" bindtap="savePDF">保存PDF</button>
  </view>

  <!-- 插屏广告 -->
  <view wx:if="{{false}}" class="interstitial-ad">
    <view class="ad-overlay" bindtap="closeInterstitialAd">
      <view class="ad-content" catchtap="true">
        <view class="ad-header">
          <text class="ad-label">广告</text>
          <text class="ad-close" bindtap="closeInterstitialAd">×</text>
        </view>
        <view class="ad-body">
          <text class="ad-title">插屏广告</text>
          <text class="ad-desc">(分享/保存前显示)</text>
          <view class="ad-actions">
            <button class="ad-action-btn" bindtap="doShare">继续分享</button>
            <button class="ad-action-btn" bindtap="doSavePDF">继续保存</button>
          </view>
          <button class="ad-close-btn" bindtap="closeInterstitialAd">关闭广告</button>
        </view>
      </view>
    </view>
  </view>

  <!-- 相关推荐 -->
  <view class="recommendations-section">
    <view class="section-header">
      <text class="section-icon">🔄</text>
      <text class="section-title">相关推荐：</text>
    </view>
    <view class="recommendations-list">
      <view 
        class="recommendation-item" 
        wx:for="{{recommendations}}" 
        wx:key="name"
        data-item="{{item}}"
        bindtap="viewRecommendation"
      >
        <text class="recommendation-icon">{{item.icon}}</text>
        <view class="recommendation-info">
          <text class="recommendation-name">{{item.name}}</text>
          <text class="recommendation-desc">{{item.desc}}</text>
        </view>
        <text class="recommendation-arrow">></text>
      </view>
    </view>
  </view>
</scroll-view>
